{% extends 'layout_ayigi.html.twig' %}

{% block contenu %}

<section class="title">
        <div class="container">
            <div class="row-fluid">
                <div class="span6">
                    <h1>Finaliser votre paiement</h1>
                </div>
                <div class="span6">
                    <ul class="breadcrumb pull-right">
                        <li><a href="index.html">Home</a> <span class="divider">/</span></li>
                        <li><a href="#">Pages</a> <span class="divider">/</span></li>
                        <li class="active">finaliser paiement</li>
                    </ul>
                </div>
            </div>
        </div>
</section>
<!-- / .title --> 

<section id="terms-use" class="container">

    <h3>Etapes de paiement d'un service</h3>
    <form action="#" method="post" >

        <div class="span3">
            <h4>Etape 1 choisir de la destination</h4>
            
                <div class="form-group">
                    {{ form_label (form.paysDestination, "Pays") }}
                    {{ form_widget(form.paysDestination, {'attr' : {'class' : 'paysclass'}}) }}
                </div>

                <div class="form-group">
                    {{ form_label (form.etablissements, "Etablissement") }}
                    {{ form_widget(form.etablissements, {'attr' : {'class' : 'etablissementclass'}}) }}
                </div>

                
        </div>
        <div class="span3">
            <h4>Etape 2 choisir le service</h4>
                

                <div class="form-group">
                    {{ form_label (form.service, "Services") }}
                    {{ form_widget(form.service, {'attr' : {'class' : 'serviceclass'}}) }}
                </div>

                <div class="form-group">
                    {{ form_label (form.montant, "Montant à payer") }}
                    {{ form_widget(form.montant, {'attr' : {'class' : 'montantclass'}}) }}
                </div>
                
                <div class="form-group">
                    {{ form_label (form.message, "Message (optionnel)") }}
                    {{ form_widget(form.message, {'attr' : {'class' : 'messageclass'}}) }}
                </div>

                
        </div>

        <div class="span3">
            <h4>Information du bénéficiaire (optionnel)</h4>
            <div class="form-group">
                {{ form_label (form.nom, "Nom") }}
                {{ form_widget(form.nom, {'attr' : {'class' : 'nomclass'}}) }}
            </div>

            <div class="form-group">
                {{ form_label (form.prenom, "prenom (optionnel)") }}
                {{ form_widget(form.prenom, {'attr' : {'class' : 'prenomclass'}}) }}
            </div>

            <div class="form-group">
                {{ form_label (form.telephone, "telephone (optionnel)") }}
                {{ form_widget(form.telephone, {'attr' : {'class' : 'telephoneclass'}}) }}
            </div>

        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
        
</section>
{% endblock %}


{% block services %}
    <!--Services-->
    <section id="services">
        <div class="container">
            <div class="center gap">
                <h3>What We Offer</h3>
                <p class="lead">Look at some of the recent projects we have completed for our valuble clients</p>
            </div>

            <div class="row-fluid">
                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-globe icon-medium"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">Web Design</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>            

                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-thumbs-up-alt icon-medium"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">Graphic Design</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>            

                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-leaf icon-medium icon-rounded"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">Email Marketing</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="gap"></div>

            <div class="row-fluid">
                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-shopping-cart icon-medium"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">Ecommerce Solution</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>            

                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-globe icon-medium"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">SEO &amp; Solution</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>            

                <div class="span4">
                    <div class="media">
                        <div class="pull-left">
                            <i class="icon-globe icon-medium"></i>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading">Bootstrap</h4>
                            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>
    <!--/Services-->
{% endblock %}

{% block script %}
    <script type = "text/javascript">
        $(document).ready(function(){
           
            $(".paysclass").change(function() {
                alert('change pays');
                changepays('etablissement','pays');
            });

            $(".etablissementclass").change(function() {
                alert('change etab');
                changeEtablissement('service','etablissement');
                
            });
            
            function changepays(selecteur,selecteurparent)
            {  
                var id = $('.' + selecteurparent + 'class').val();
            
                $.ajax({
                    url: "{{ path('ayigi_client_choix_pays_etablissement') }}",
                    type: "POST",
                    data: "select="+ selecteur + "& id="+ id,
                    dataType: "json",
                    success: function(reponse) { 
                        
                        $('.'+selecteur+'class').empty();
                        $.each(reponse, function(index, element) {
                        $('.'+selecteur+'class').append('<option value="'+element.id+'" selected="selected"> '+element.nom+' </option>');
                        });
                    },
                    error: function() {
                        alert("error");
                    }
                });
            }


            function changeEtablissement(selecteur,selecteurparent)
            {  
                var id = $('.' + selecteurparent + 'class').val();
            
                $.ajax({
                    url: "{{ path('ayigi_client_choix_etablissement_service') }}",
                    type: "POST",
                    data: "select="+ selecteur + "& id="+ id,
                    dataType: "json",
                    success: function(reponse) { 
                        
                        $('.'+selecteur+'class').empty();
                        $.each(reponse, function(index, element) {
                        $('.'+selecteur+'class').append('<option value="'+element.id+'" selected="selected"> '+element.nom+' </option>');
                        });
                    },
                    error: function() {
                        alert("error");
                    }
                });
            }
            //end Ajax


            $("#new-transaction-form").fadeOut();

            $("#new-transaction").click(function(){
                $("#liste_paiement").fadeOut();
                $("#new-transaction-form").fadeIn();
            });

        });
         
    </script>
{% endblock %}